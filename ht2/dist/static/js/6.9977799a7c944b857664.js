webpackJsonp([6],{Aeh1:function(t,e){},DhAB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),o=a("exGp"),r=a.n(o),i=a("sYY+"),c=a.n(i),l=a("Pexp"),u=a("oAV5"),d=a("nHSH"),m=(a("mtWM"),a("mw3O"),l.default,c.a,{data:function(){return{article:{contentHtml:""},is_show:0,tabletwoData:[],submitform:{jypassword:""},shujuData:"",jypassword:"",page:1,id:"",editor:"",show:!1}},components:{Title:l.default,E:c.a},created:function(){var t=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.getAdminLog(1);case 1:case"end":return e.stop()}},e,t)}))()},methods:{querySearch:function(t,e){var a=this.restaurants;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},loadAll:function(){return[{value:"vue"},{value:"node.js"}]},handleSelect:function(t){console.log(t)},getContent:function(){alert(this.article.contentHtml)},getDate:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},getAdminLog:function(t){var e=this;return r()(n.a.mark(function a(){var s,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.announcements({token:u.a.getCookie("token"),page:t});case 2:1==(s=a.sent).data.status?(e.shujuData=s.data.data,console.log(s.data.data),o=s.data.data.list.map(function(t,a){return t.add_time=e.getDate(1e3*t.add_time),e.id=t.id,t}),console.log(789,e.id),e.tabletwoData=o,e.$message.success(s.data.info)):e.$message.error(s.data.info);case 4:case"end":return a.stop()}},a,e)}))()},handleCurrentChange:function(t){this.getAdminLog(t)},delClick:function(t){var e=this;return r()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(t),a.next=3,d.a.del({id:t.id});case 3:1==a.sent.data.status&&(e.$message.success("删除成功"),e.getAdminLog(1));case 5:case"end":return a.stop()}},a,e)}))()},modifyClick:function(t){var e=this;return r()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.is_show=1,e.show=!0,e.submitform.jypassword=t.title,e.article.contentHtml=t.content,e.id=t.id,console.log(t);case 6:case"end":return a.stop()}},a,e)}))()},okClick:function(t){var e=this;return r()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.auditSuccess({id:t.id});case 2:1==(s=a.sent).data.status?(console.log(e.id),e.$message.success("审核成功"),e.getAdminLog(1)):e.$message.error(s.data.info);case 4:case"end":return a.stop()}},a,e)}))()},noClick:function(t){var e=this;return r()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.auditError({id:t.id});case 2:1==(s=a.sent).data.status?(console.log(e.id),e.$message.success("审核失败"),e.getAdminLog(1)):e.$message.error(s.data.info);case 4:case"end":return a.stop()}},a,e)}))()},addArticleClick:function(){var t=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.is_show=2,t.show=!0,t.submitform.jypassword="",t.article.contentHtml="",t.editor.txt.html("");case 5:case"end":return e.stop()}},e,t)}))()},onSubmitClick:function(){var t=this;return r()(n.a.mark(function e(){var a,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(2!=t.is_show){e.next=7;break}return e.next=3,d.a.addgonggao({token:u.a.getCookie("token"),title:t.submitform.jypassword,content:t.editor.txt.html(),id:""});case 3:1==(a=e.sent).data.status?(t.show=!1,t.$message.success("添加成功"),t.getAdminLog(1)):t.$message.error(a.data.info),e.next=13;break;case 7:if(1!=t.is_show){e.next=13;break}return e.next=10,d.a.addgonggao({token:u.a.getCookie("token"),title:t.submitform.jypassword,content:t.editor.txt.html(),id:t.id});case 10:s=e.sent,console.log(t.tabletwoData.id),1==s.data.status?(t.show=!1,t.tabletwoData.title=t.submitform.jypassword,t.tabletwoData.content=t.article.contentHtml,t.getAdminLog(1),t.$message.success("修改成功")):t.$message.success(s.data.info);case 13:case"end":return e.stop()}},e,t)}))()},clone:function(){this.show=!1}},mounted:function(){var t=this;return r()(n.a.mark(function e(){var a,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("adsf"),console.log(t.$refs.editor),a=t,s=new c.a(t.$refs.editor),t.editor=s,s.customConfig.uploadImgParamsWithUrl=!0,s.customConfig.pasteIgnoreImg=!0,s.customConfig.pasteFilterStyle=!1,s.customConfig.uploadImgServer="/admin/bank/uploadPic",s.customConfig.showLinkImg=!1,s.customConfig.uploadFileName="pic",s.customConfig.uploadImgParams={token:u.a.getCookie("token")},s.customConfig.uploadImgHooks={success:function(t,e,a){},fail:function(t,e,a){},error:function(t,e){},timeout:function(t,e){},customInsert:function(t,e,s){t(n=a.img_url+e.data),s.txt.img(n),s.txt.html(o);var n=s.txt.img(),o=s.txt.html()}},s.create();case 14:case"end":return e.stop()}},e,t)}))()}}),f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"memberList"},[a("Title",[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("公告列表")])]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addArticleClick}},[t._v("新增公告")]),t._v(" "),a("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:t.tabletwoData,"header-cell-style":{background:"#F9F9F9",color:"#606266"},border:""}},[a("el-table-column",{attrs:{label:"名称",prop:"title",resizable:!1,align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"添加时间",prop:"add_time",resizable:!1,align:"center"}}),t._v(" "),a("el-table-column",{staticClass:"elcolumn",attrs:{label:"操作",prop:"content",align:"center",fixed:"right",width:"400px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return t.delClick(e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return t.modifyClick(e.row)}}},[t._v("修改")])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"mark"},[a("div",{staticClass:"mark-content"},[2==t.is_show?a("div",{staticClass:"hytj"},[t._v("添加公告")]):t._e(),t._v(" "),1==t.is_show?a("div",{staticClass:"hytj"},[t._v("修改公告")]):t._e(),t._v(" "),a("el-form",{staticClass:"submitform",attrs:{model:t.submitform}},[a("table",{staticStyle:{width:"90%",height:"80px",border:"1px dashed #000",background:"#F9F9F9"},attrs:{rules:"all"}},[a("tr",[a("td",{staticClass:"td1"},[t._v("标题:")]),t._v(" "),a("td",{staticClass:"td2"},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:t.submitform.jypassword,callback:function(e){t.$set(t.submitform,"jypassword",e)},expression:"submitform.jypassword"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.jypassword,expression:"jypassword"}],staticStyle:{color:"red",display:"flex","align-items":"center",height:"100%"}},[t._v("请输入用户名")])],1)]),t._v(" "),a("tr",[a("td",{staticClass:"td1"},[t._v("图文内容:")]),t._v(" "),a("td",{staticClass:"td2"},[a("div",{ref:"editor",staticStyle:{"text-align":"left"}},[a("div",{domProps:{innerHTML:t._s(t.article.contentHtml)}})])])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",{staticClass:"td2"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmitClick}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.clone}},[t._v("返回")])],1)])])])],1)]),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:t.shujuData.num,"page-size":15},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var g=a("VU/8")(m,f,!1,function(t){a("Aeh1"),a("wB0C")},"data-v-5db953e3",null);e.default=g.exports},wB0C:function(t,e){}});
//# sourceMappingURL=6.9977799a7c944b857664.js.map