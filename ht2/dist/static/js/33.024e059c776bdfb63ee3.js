webpackJsonp([33],{yq3Q:function(t,e){},zCnQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),n=a("exGp"),r=a.n(n),o=a("sYY+"),l=a.n(o),c=a("oAV5"),u=a("nHSH"),m=a("mtWM"),h=a.n(m),d={data:function(){return{article:{contentHtml:""},tabletwoData:[],shujuData:"",searchform:{value:"",zhixiang:"",sou:"",xiangqing:"",renwu:"",xiangqingid:""},img_url:this.img_url,show:!1,submitform:{id:0,bankname:"",title:"",resource:"",name:""},quizData:{quizId:0,quizTitle:"",quizType:0,updateTime:"2018-11-28T03:10:25.082Z"},imageUrl:"",img:"",type:1,id:0,zhfl:[{value:"1",name:"首页",id:1},{value:"2",name:"任务",id:2},{value:"3",name:"商圈",id:3}],options:[],qb:"",inp:!1,sale:[],is_sale:!1,is_shang:!1,shangjin:[],add:1,tuwen:!1,editor:"",zhixiang_id:"",type1:"",img_url_bianji:""}},created:function(){var t=this;return r()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.lunbo_list(1);case 1:case"end":return e.stop()}},e,t)}))()},methods:{querySearch:function(t,e){var a=this.restaurants;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},loadAll:function(){return[{value:"vue"},{value:"node.js"}]},handleSelect:function(t){console.log(t)},getContent:function(){alert(this.article.contentHtml)},xuanzeClick:function(t){console.log(123,this.searchform.value),1==this.searchform.value||2==this.searchform.value?this.options=[{value:"1",name:"图文",id:1},{value:"2",name:"赏金任务",id:2},{value:"3",name:"商品详情",id:3},{value:"4",name:"外链",id:4}]:3==this.searchform.value&&(this.options=[{value:"1",name:"图文",id:1},{value:"3",name:"商品详情",id:3}])},zhixiangClick:function(t){var e=this;return r()(s.a.mark(function a(){var i,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log(t,e.searchform.zhixiang),""==e.searchform.zhixiang&&(e.is_shang=!1,e.is_sale=!1,e.inp=!1,e.tuwen=!1),1!=e.searchform.zhixiang&&"图文"!=e.searchform.zhixiang||(e.is_shang=!1,e.is_sale=!1,e.inp=!1,e.tuwen=!0,console.log(e.tuwen)),2!=e.searchform.zhixiang&&"赏金任务"!=e.searchform.zhixiang){a.next=12;break}return e.is_shang=!0,e.is_sale=!1,e.inp=!1,e.tuwen=!1,a.next=10,u.a.lunboSearch();case 10:1==(i=a.sent).data.status&&(e.shangjin=i.data.data);case 12:if(3!=e.searchform.zhixiang&&"商品详情"!=e.searchform.zhixiang){a.next=21;break}return e.is_sale=!0,e.is_shang=!1,e.inp=!1,e.tuwen=!1,a.next=19,u.a.goodsInformation();case 19:1==(n=a.sent).data.status&&(e.sale=n.data.data);case 21:4!=e.searchform.zhixiang&&"外链"!=e.searchform.zhixiang||(e.inp=!0,e.is_shang=!1,e.is_sale=!1,e.tuwen=!1);case 22:case"end":return a.stop()}},a,e)}))()},getDate:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},lunbo_list:function(t){var e=this;return r()(s.a.mark(function a(){var i,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.lunbo_list({page:t,zhixiang:e.searchform.sou});case 2:i=a.sent,console.log(e.zhixiang),1==i.data.status?(e.shujuData=i.data.data,console.log(99999999,e.shujuData),n=i.data.data.list.map(function(t){return t.add_time=e.getDate(1e3*t.add_time),t}),e.tabletwoData=n,e.$message.success(i.data.info)):e.$message.error(i.data.info);case 5:case"end":return a.stop()}},a,e)}))()},pushImg:function(t){var e=this;return r()(s.a.mark(function a(){var i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=new FormData,console.log(i),i.append("pic",t.target.files[0]),console.log(11,e.headers),i.append("token",c.a.getCookie("token")),console.log(777,i.get("pic")),a.next=8,h.a.post("http://118.190.174.163//admin/type/ossType",i,{transformRequest:[function(t){return t}],headers:e.headers}).then(function(t){e.img=t.data.data,e.imageUrl=e.img_url+e.img,e.imges=e.img,console.log(123,t.data.data)}).catch(function(t){console.log(t)});case 8:case"end":return a.stop()}},a,e)}))()},onSearchClick:function(){this.lunbo_list(1)},addMerberClick:function(){this.tuwen=!1,this.submitform.title="",this.show=!0,this.img="",this.imageUrl="",this.searchform.zhixiang="",this.searchform.value="",this.imges="",this.submitform.resource="",this.article.contentHtml="",this.searchform.xiangqing="",this.submitform.name="",this.submitform.title="",this.editor.txt.html(""),this.inp=!1,this.is_shang=!1,this.is_sale=!1,this.type=1,this.add=1,console.log(555123)},delClick:function(t){var e=this;this.$confirm("是否继续删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(r()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.delLunbo({token:c.a.getCookie("token"),id:t.id});case 2:1==a.sent.data.status&&e.$message.success("删除成功"),e.lunbo_list(1);case 5:case"end":return a.stop()}},a,e)}))).catch(function(){e.$message({type:"info",message:"已取消删除"})})},modifyClick:function(t){this.show=!0,this.add=2,this.id=Number(t.id),this.type=2,this.lunbo_list(1),1==t.type&&(this.searchform.zhixiang="图文",this.inp=!1,this.is_shang=!1,this.is_sale=!1,this.tuwen=!0),2==t.type&&(this.searchform.zhixiang="赏金任务",this.inp=!1,this.is_shang=!0,this.is_sale=!1,this.tuwen=!1),3==t.type&&(this.searchform.zhixiang="商品详情",this.inp=!1,this.is_shang=!1,this.is_sale=!0,this.tuwen=!1),4==t.type&&(this.searchform.zhixiang="外部链接",this.inp=!0,this.is_shang=!1,this.is_sale=!1,this.tuwen=!1),this.searchform.value=t.zhixiang_id,1==t.zhixiang_id&&(this.searchform.value="首页"),2==t.zhixiang_id&&(this.searchform.value="任务"),3==t.zhixiang_id&&(this.searchform.value="商圈"),this.imageUrl=t.pic,this.img_url_bianji=t.pic,this.imges=t.pic,this.img=t.pic,this.submitform.resource=Number(t.status),this.article.contentHtml=t.content,this.editor.txt.html(this.article.contentHtml),this.submitform.title=t.title,console.log(333,t.title),this.searchform.xiangqing=t.goods_name,this.searchform.xiangqingid=t.goods_id,this.submitform.name=t.goods_id,this.searchform.renwu=t.goods_id,console.log(9,this.searchform.xiangqing,8,this.submitform.name,7,this.searchform.renwu),console.log(this.id)},onSubmitClick:function(t){var e=this;return r()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=e.type){t.next=7;break}return t.next=3,u.a.addLunbo({zhixiang_id:e.searchform.value,type:e.searchform.zhixiang,pic:e.imges,status:e.submitform.resource,content:e.editor.txt.html(),goods_id:e.searchform.xiangqing||e.submitform.name||e.searchform.renwu,title:e.submitform.title,id:""});case 3:1==(a=t.sent).data.status?(e.show=!1,e.lunbo_list(1),e.$message.success(a.data.info),e.searchform.zhixiang="",e.searchform.value="",e.imges="",e.submitform.resource="",e.article.contentHtml="",e.searchform.xiangqing="",e.submitform.name="",e.searchform.renwu="",e.submitform.title="",e.inp=!1,e.is_shang=!1,e.is_sale=!1,e.tuwen=!1,e.editor.txt.html(""),setTimeout(function(){console.log(0x1b69b4bc0ae9fe0),e.$router.push({path:"/swiper"})},100)):e.$message.error(a.data.info),t.next=16;break;case 7:if(2!=e.type){t.next=16;break}return"赏金任务"!=e.searchform.zhixiang&&2!=e.searchform.zhixiang||(e.searchform.xiangqing="",e.submitform.name=""),"商品详情"!=e.searchform.zhixiang&&3!=e.searchform.zhixiang||(e.submitform.name="",e.searchform.renwu=""),"外部链接"!=e.searchform.zhixiang&&4!=e.searchform.zhixiang||(e.searchform.xiangqing="",e.searchform.renwu=""),t.next=13,u.a.addLunbo({zhixiang_id:"首页"==e.searchform.value?1:"任务"==e.searchform.value?2:"商圈"==e.searchform.value?3:e.searchform.value,type:"图文"==e.searchform.zhixiang?1:"赏金任务"==e.searchform.zhixiang?2:"商品详情"==e.searchform.zhixiang?3:"外部链接"==e.searchform.zhixiang?4:e.searchform.zhixiang,pic:e.imges||e.img_url_bianji,status:e.submitform.resource,content:e.editor.txt.html(),goods_id:e.searchform.xiangqing||e.submitform.name||e.searchform.renwu,title:e.submitform.title,id:e.id});case 13:i=t.sent,console.log(8520,e.searchform.xiangqing,2580,e.submitform.name,222,e.searchform.renwu),1==i.data.status?(e.show=!1,e.$message.success(i.data.info),e.img_url_bianji="",e.searchform.zhixiang="",e.searchform.value="",e.imges="",e.submitform.resource="",e.article.contentHtml="",e.submitform.name="",e.searchform.xiangqingid="",e.searchform.xiangqing="",e.submitform.title="",e.editor.txt.html(""),e.searchform.renwu="",e.lunbo_list(1),console.log(333,e.searchform.xiangqing,222,e.submitform.name,55,e.searchform.renwu)):e.$message.error(i.data.info);case 16:case"end":return t.stop()}},t,e)}))()},clone:function(){this.show=!1},handleCurrentChange:function(t){this.lunbo_list(t)}},mounted:function(){var t=this,e=new l.a(this.$refs.editor);this.editor=e,e.customConfig.uploadImgParamsWithUrl=!0,e.customConfig.uploadImgServer="/admin/bank/uploadPic",e.customConfig.uploadImgMaxSize=3145728,e.customConfig.uploadImgMaxLength=5,e.customConfig.uploadFileName="pic",e.customConfig.uploadImgParams={token:c.a.getCookie("token")},e.customConfig.uploadImgHooks={success:function(t,e,a){},fail:function(t,e,a){},error:function(t,e){},timeout:function(t,e){},customInsert:function(e,a,i){e(s=t.img_url+a.data),i.txt.img(s),i.txt.html(n);var s=i.txt.img(),n=i.txt.html()}},e.create()}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"swiper"},[a("el-form",{staticClass:"searchform",attrs:{inline:!0,model:t.searchform}},[a("el-form-item",{attrs:{label:"搜索指向:"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:t.searchform.sou,callback:function(e){t.$set(t.searchform,"sou",e)},expression:"searchform.sou"}},[a("el-option",{key:"",attrs:{label:"全部",value:t.qb}}),t._v(" "),t._l(t.zhfl,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})})],2)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSearchClick}},[t._v("搜索")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addMerberClick()}}},[t._v("添加轮播图")])],1)],1),t._v(" "),a("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:t.tabletwoData,"header-cell-style":{background:"#F9F9F9",color:"#606266"},border:""}},[a("el-table-column",{attrs:{label:"轮播图ID",prop:"id",resizable:!1,align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"指向",prop:"zhixiang_id",resizable:!1,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.zhixiang_id?a("div",[t._v("首页")]):t._e(),t._v(" "),2==e.row.zhixiang_id?a("div",[t._v("任务")]):t._e(),t._v(" "),3==e.row.zhixiang_id?a("div",[t._v("商圈")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"跳转",prop:"type",resizable:!1,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?a("div",[t._v("图文")]):t._e(),t._v(" "),2==e.row.type?a("div",[t._v("赏金任务")]):t._e(),t._v(" "),3==e.row.type?a("div",[t._v("商品详情")]):t._e(),t._v(" "),4==e.row.type?a("div",[t._v("外链")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"图片",prop:"pic",width:"500px",resizable:!1,align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"scope-img",attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否在首页显示",prop:"status",resizable:!1,align:"center",width:"160px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("div",[t._v("显示")]):t._e(),t._v(" "),0==e.row.status?a("div",[t._v("不显示")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"添加时间",prop:"add_time",resizable:!1,align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",resizable:!1,align:"center",width:"350px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return t.delClick(e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.modifyClick(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"mark"},[a("div",{staticClass:"mark-content"},[1==t.add?a("div",{staticClass:"hytj"},[t._v("轮播图添加")]):t._e(),t._v(" "),2==t.add?a("div",{staticClass:"hytj"},[t._v("轮播图编辑")]):t._e(),t._v(" "),a("el-form",{staticClass:"submitform",attrs:{model:t.submitform}},[a("table",{staticStyle:{width:"90%",height:"80px",background:"#F9F9F9"},attrs:{rules:"all"}},[a("tr",{staticStyle:{background:"#EEEEEE"}},[a("td",{staticStyle:{"text-align":"center"}},[t._v("名称")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("内容")])]),t._v(" "),a("tr",[a("td",{staticClass:"td1"},[t._v("添加图片")]),t._v(" "),a("td",{staticClass:"td2 imgdw"},[a("div",{staticClass:"sctp"},[a("input",{staticClass:"upload",attrs:{id:"load",type:"file",accept:"image/*",value:"上传头像"},on:{change:function(e){return t.pushImg(e)}}}),t._v(" "),""==t.img?a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}):a("img",{attrs:{src:t.img,alt:""}})])])]),t._v(" "),a("tr",[a("td",{staticClass:"td3",staticStyle:{"text-align":"center"}},[t._v("是否在前台显示:")]),t._v(" "),a("td",{staticClass:"td2"},[a("el-radio",{attrs:{label:1},model:{value:t.submitform.resource,callback:function(e){t.$set(t.submitform,"resource",e)},expression:"submitform.resource"}},[t._v("显示")]),t._v(" "),a("el-radio",{attrs:{label:0},model:{value:t.submitform.resource,callback:function(e){t.$set(t.submitform,"resource",e)},expression:"submitform.resource"}},[t._v("不显示")])],1)]),t._v(" "),a("tr",[a("td",{staticClass:"td3",staticStyle:{"text-align":"center"}},[t._v("搜索指向")]),t._v(" "),a("td",{staticClass:"td2"},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:t.xuanzeClick},model:{value:t.searchform.value,callback:function(e){t.$set(t.searchform,"value",e)},expression:"searchform.value"}},t._l(t.zhfl,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}),1)],1)]),t._v(" "),a("tr",[a("td",{staticClass:"td3",staticStyle:{"text-align":"center"}},[t._v("指向内容")]),t._v(" "),a("td",{staticClass:"td2"},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:t.zhixiangClick},model:{value:t.searchform.zhixiang,callback:function(e){t.$set(t.searchform,"zhixiang",e)},expression:"searchform.zhixiang"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}),1)],1)]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.is_sale,expression:"is_sale"}]},[a("td",{staticClass:"td3",staticStyle:{"text-align":"center"}},[t._v("商品详情")]),t._v(" "),a("td",{staticClass:"td2"},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:t.searchform.xiangqing,callback:function(e){t.$set(t.searchform,"xiangqing",e)},expression:"searchform.xiangqing"}},t._l(t.sale,function(t){return a("el-option",{key:t.value,attrs:{label:t.goods_name,value:t.goods_id}})}),1)],1)]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.is_shang,expression:"is_shang"}]},[a("td",{staticClass:"td3",staticStyle:{"text-align":"center"}},[t._v("任务")]),t._v(" "),a("td",{staticClass:"td2"},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:t.searchform.renwu,callback:function(e){t.$set(t.searchform,"renwu",e)},expression:"searchform.renwu"}},t._l(t.shangjin,function(t){return a("el-option",{key:t.value,attrs:{label:t.title,value:t.id}})}),1)],1)]),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.inp,expression:"inp"}]},[a("td",{staticStyle:{"text-align":"center"}},[t._v("外链地址")]),t._v(" "),a("td",{staticClass:"td2"},[a("el-input",{attrs:{size:"small"},model:{value:t.submitform.name,callback:function(e){t.$set(t.submitform,"name",e)},expression:"submitform.name"}})],1)]),t._v(" "),t.tuwen?a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("标题")]),t._v(" "),a("td",{staticClass:"td2"},[a("el-input",{attrs:{size:"small"},model:{value:t.submitform.title,callback:function(e){t.$set(t.submitform,"title",e)},expression:"submitform.title"}})],1)]):t._e(),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.tuwen,expression:"tuwen"}]},[a("td",{staticStyle:{"text-align":"center"}},[t._v("编辑器")]),t._v(" "),a("td",{staticClass:"td2"},[a("div",{ref:"editor",staticStyle:{"text-align":"left"}},[a("div",{domProps:{innerHTML:t._s(t.article.contentHtml)}})])])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",{staticClass:"td2"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmitClick}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.clone}},[t._v("返回")])],1)])])])],1)]),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:t.shujuData.num,"page-size":15},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var g=a("VU/8")(d,f,!1,function(t){a("yq3Q")},"data-v-39406ae5",null);e.default=g.exports}});
//# sourceMappingURL=33.024e059c776bdfb63ee3.js.map